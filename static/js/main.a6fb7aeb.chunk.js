(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{114:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n(0),i=n.n(r),c=n(13),o=n.n(c),s=(n(95),n(14)),u=n.n(s),l=n(21),m=n(35),h={getAuthenticationBlob:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ticket,e.abrupt("return",btoa(n.ticketId));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fetchChallenge:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("./Authentication/getChallenge.json",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e.value})).catch((function(e){console.error("Error:",e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),signChallenge:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.useTicketProof,a=t.challenge,e.abrupt("return","{challenge: ".concat(a,", proof: ").concat(atob(n),"}"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sendChallenge:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.signedMsg,e.abrupt("return",fetch("./Authentication/validChallenge.json",{method:"GET"}).then((function(e){return e.json()})).then((function(e){return e.value})).catch((function(e){console.error("Error:",e)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),assetOwnerAddress:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),findOwner:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},d=n(29),f=n(30),p=n(51),g=function(){function e(t){Object(d.a)(this,e),this.filter=t}return Object(f.a)(e,[{key:"negotiate",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getTokenInstances",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,a,r,i,c,o,s,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URLSearchParams(window.location.search),n=t.get("ticket"),a=t.get("secret"),r=localStorage.getItem("dcTokens"),c={},n&&(i=new p.a(n),c=i.ticket),c.ticketId,c.ticketClass,o=c.devconId,s={raw:[],web:[]},o?(l=!0,r&&r.length&&JSON.parse(r).map((function(e){var t=new p.a(e.ticket);t.ticket.ticketId==c.ticketId?(s.raw.push({ticket:n,secret:a}),s.web.push({devconId:c.devconId,ticketId:c.ticketId,ticketClass:c.ticketClass}),l=!1):(s.raw.push(e),s.web.push({devconId:t.ticket.devconId,ticketId:t.ticket.ticketId,ticketClass:t.ticket.ticketClass}))})),l&&(s.raw.push({ticket:n,secret:a}),s.web.push({devconId:c.devconId,ticketId:c.ticketId,ticketClass:c.ticketClass})),localStorage.setItem("dcTokens",JSON.stringify(s.raw))):r&&r.length&&JSON.parse(r).map((function(e){var t=new p.a(e.ticket);s.raw.push(e),s.web.push({devconId:t.ticket.devconId,ticketId:t.ticket.ticketId,ticketClass:t.ticket.ticketClass})})),e.abrupt("return",s.web);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),b=n(154),j=n(158),v=n(78);n(114);var k=function(e){var t=e.title;return Object(a.jsx)(b.a,{className:"logoCard",children:Object(a.jsx)(j.a,{children:Object(a.jsx)(v.a,{gutterBottom:!0,variant:"h1",component:"h1",children:t})})})},O=n(160),y=n(165),w=n(169),x=n(166),I=n(163),S=n(170),P=n(173),C=n(162),A=n(161),B=n(168),T=n(167),E=n(159),N=n(75),V=n(17),D=n(171);function K(){var e=i.a.useState(new Date("2021-04-10T21:11:54")),t=Object(m.a)(e,2),n=t[0],r=t[1];return Object(a.jsx)(V.a,{utils:N.a,children:Object(a.jsx)(E.a,{container:!0,justify:"space-around",children:Object(a.jsx)(D.a,{disableToolbar:!0,variant:"inline",format:"dd/mm/yyyy",margin:"normal",id:"date-picker-inline",label:"Date picker inline",value:n,onChange:function(e){r(e)},KeyboardButtonProps:{"aria-label":"change date"}})})})}n(120);var H=Object(O.a)({root:{maxWidth:345},media:{height:3}});var q=function(e){var t=e.tokenInstance,n=e.applyDiscount,r=H();return Object(a.jsx)(b.a,{className:"card",children:Object(a.jsxs)(y.a,{children:[Object(a.jsx)(x.a,{className:r.media,image:"./mock.png",title:"token"}),Object(a.jsxs)(j.a,{onClick:function(e){return n(t)},children:[Object(a.jsx)(v.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t.ticketClass.toString()}),Object(a.jsxs)(v.a,{variant:"body2",color:"textSecondary",component:"p",children:["Ticket Id: ",t.ticketId.toString()]}),Object(a.jsxs)(v.a,{variant:"body2",color:"textSecondary",component:"p",children:["Devcon Id: ",t.devconId.toString()]})]})]})})};function J(e){var t=e.roomType,n=e.applyDiscount,r=e.discountApplied,c=e.price,o=e.tokens,s=i.a.useState(!1),u=Object(m.a)(s,2),l=u[0],h=u[1],d=function(){h(!1)};return Object(a.jsxs)("div",{children:[Object(a.jsx)(I.a,{size:"small",color:"primary",onClick:function(){h(!0)},children:"Book"}),Object(a.jsxs)(P.a,{open:l,onClose:d,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(T.a,{id:"form-dialog-title",children:t}),Object(a.jsxs)(A.a,{children:[Object(a.jsxs)(B.a,{children:[r?"Special discount":"Standard"," price of ",c," ETH per night."]}),Object(a.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"booking-name",label:"Booking Name",type:"text",fullWidth:!0}),Object(a.jsx)(K,{}),Object(a.jsx)("p",{children:"Select a ticket:"}),o&&o.map((function(e,t){return Object(a.jsx)(q,{applyDiscount:n,tokenInstance:e},t)}))]}),Object(a.jsxs)(C.a,{children:[Object(a.jsx)(I.a,{onClick:d,color:"primary",children:"Cancel"}),Object(a.jsx)(I.a,{onClick:d,color:"primary",children:"Verify Ticket"})]})]})]})}n(121);var _=Object(O.a)({root:{maxWidth:345,margin:"20px"},media:{height:140}});function R(e){var t=e.room,n=e.applyDiscount,r=e.discountApplied,i=e.tokens,c=_(),o=t.type,s=t.price,u=t.discountPrice,l=t.image,m=t.frequency;return Object(a.jsxs)(b.a,{className:"roomCard",children:[Object(a.jsxs)(y.a,{children:[Object(a.jsx)(x.a,{className:c.media,image:l,title:"token"}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)(v.a,{gutterBottom:!0,variant:"h5",component:"h2",children:o}),!1===r&&Object(a.jsxs)(v.a,{variant:"body2",color:"textSecondary",component:"p",children:[s," ETH / ",m]}),!0===r&&Object(a.jsxs)("div",{children:[Object(a.jsxs)(v.a,{style:{textDecoration:"line-through"},variant:"body2",color:"textSecondary",component:"span",children:[s," ETH"]}),Object(a.jsx)("span",{children:" "}),Object(a.jsxs)(v.a,{variant:"body2",color:"textSecondary",component:"span",children:["$",u," ETH / ",m]})]})]})]}),Object(a.jsx)(w.a,{children:Object(a.jsx)(J,{applyDiscount:n,tokens:i,roomType:o,discountApplied:r,price:r?u:s})})]})}var F=n(74);n(122);var L=function(){var e=Object(r.useState)([]),t=Object(m.a)(e,2),n=t[0],i=t[1];Object(r.useEffect)((function(){}),[]);var c=Object(r.useState)(!1),o=Object(m.a)(c,2),s=o[0],d=o[1],f=Object(r.useState)(!1),p=Object(m.a)(f,2),b=(p[0],p[1]);new g(["discountTokens"]),window.document.addEventListener("ticketsRecievedEvent",(function(e){d(!0),i(e.detail)}),!1);var j=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getAuthenticationBlob({ticket:t});case 2:return n=e.sent,e.next=5,h.fetchChallenge();case 5:return a=e.sent,e.next=8,h.signChallenge({useTicketProof:n,challenge:a});case 8:return r=e.sent,e.next=11,h.sendChallenge({signedMsg:r});case 11:i=e.sent,b(i);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsx)(k,{title:"Hotel Bogota"}),Object(a.jsx)("div",{className:"iframeAttestation",dangerouslySetInnerHTML:{__html:'<iframe id="test" src="./demo.html" title="Iframe"></iframe>'}}),Object(a.jsx)("div",{className:"roomCardsContainer",children:F.map((function(e,t){return Object(a.jsx)(R,{room:e,applyDiscount:j,discountApplied:s,tokens:n},t)}))}),s&&Object(a.jsx)("div",{children:Object(a.jsx)(v.a,{className:"applyDiscountCopyContainer",gutterBottom:!0,variant:"body2",component:"p",children:"Devcon discount applied! Enjoy the event."})})]})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,176)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};o.a.render(Object(a.jsx)(L,{}),document.getElementById("root")),U()},51:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m}));var a=n(29),r=n(30),i=n(10),c=n(12),o=(n(59),n(52)),s=n(53),u=n.n(s),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(a.a)(this,e),"string"==typeof t)throw new TypeError("Unimplemented: Not accepting string yet.");if(t instanceof ArrayBuffer){var n=Object(i.fromBER)(t);this.fromSchema(n.result)}else this.devconId=Object(c.getParametersValue)(t,"devconId"),this.ticketId=Object(c.getParametersValue)(t,"ticketId"),this.ticketClass=Object(c.getParametersValue)(t,"ticketClass")}return Object(r.a)(e,[{key:"fromSchema",value:function(t){Object(c.clearProps)(t,["devconId","ticketId","ticketClass"]);var n=Object(i.compareSchema)(t,t,e.schema());if(!1===n.verified)throw new Error("Object's schema was not verified against input data for DevconTicket");if("devconId"in n.result){var a=n.result.devconId.valueBlock._valueHex;this.devconId=new u.a("0x"+Object(c.bufferToHexCodes)(a)).value}if("ticketId"in n.result){var r=n.result.ticketId.valueBlock._valueHex;this.ticketId=new u.a("0x"+Object(c.bufferToHexCodes)(r)).value}if("ticketClass"in n.result){var o=n.result.ticketClass.valueBlock._valueHex;this.ticketClass=new u.a("0x"+Object(c.bufferToHexCodes)(o)).value}}}],[{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"ticket",value:[new i.Integer({name:t.devconId||"devconId"}),new i.Integer({name:t.ticketId||"ticketId"}),new i.Integer({name:t.ticketClass||"ticketClass"})]})}}]),e}(),m=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(a.a)(this,t),"string"==typeof n){var r=n.startsWith("https://")?new URL(n).searchParams.get("ticket"):n,s=r.split("_").join("+").split("-").join("/").split(".").join("=");n="undefined"!==typeof e?Uint8Array.from(e.from(s,"base64")).buffer:Uint8Array.from(atob(s),(function(e){return e.charCodeAt(0)})).buffer}if(n instanceof ArrayBuffer){var u=Object(i.fromBER)(n);this.fromSchema(u.result)}else this.ticket=new l(n.ticket),this.commitment=Object(c.getParametersValue)(n,"commitment"),this.publicKeyInfo=new o.a(n.publicKeyInfo),this.signatureValue=Object(c.getParametersValue)(n,"signatureValue")}return Object(r.a)(t,[{key:"fromSchema",value:function(e){Object(c.clearProps)(e,["ticket","commitment","publicKeyInfo","signatureValue"]);var n=Object(i.compareSchema)(e,e,t.schema());if(!1===n.verified)throw new Error("Object's schema was not verified against input data for SignedDevconTicket");this.ticket=new l(n.result.ticket.valueBeforeDecode),"commitment"in n.result&&(this.commitment=n.result.commitment.valueBlock.valueHex),this.publicKeyInfo=new o.a({schema:n.result.publicKeyInfo});var a=n.result.signatureValue;this.signatureValue=a.valueBlock.valueHex}}],[{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"SignedDevconTicket",value:[l.schema(e),new i.OctetString({name:"commitment"}),new i.Sequence({name:"publicKeyInfo",optional:!0,value:[o.a.schema(t.publicKeyInfo||{names:{blockName:"publicKeyInfo"}})]}),new i.BitString({name:"signatureValue"})]})}}]),t}()}).call(this,n(97).Buffer)},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(29),r=n(30),i=n(10),c=n(12),o=n(59),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(a.a)(this,e),"string"==typeof t)throw new TypeError("Not accepting string. For base64, convert to ArrayBuffer.");if(t instanceof ArrayBuffer){var n=Object(i.fromBER)(t);this.fromSchema(n.result)}else this.signatureAlgorithm=Object(c.getParametersValue)(t,"signatureAlgorithm"),this.publicKey=Object(c.getParametersValue)(t,"publicKey")}return Object(r.a)(e,[{key:"fromSchema",value:function(t){if(Object(c.clearProps)(t,["signatureAlgorithm","publicKey"]),!1===Object(i.compareSchema)(t,t,e.schema({names:{signatureAlgorithm:"signatureAlgorithm",publicKey:"publicKey"}})).verified)throw new Error("Object's schema was not verified against input data for AlgorithmIdentifier")}}],[{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",optional:!0,value:[o.a.schema(t.signatureAlgorithm||{names:{blockName:"signatureAlgorithm"}}),new i.BitString({name:"publicKey"})]})}}]),e}()},59:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(29),r=n(30),i=n(10),c=n(12),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(a.a)(this,e),"string"==typeof t)throw new TypeError("Unimplemented: Not accepting string yet.");if(t instanceof ArrayBuffer){var n=fromBER(t);this.fromSchema(n.result)}else this.algorithmId=Object(c.getParametersValue)(t,"algorithmId"),"algorithmParams"in t&&(this.algorithmParams=Object(c.getParametersValue)(t,"algorithmParams",e.defaultValues("algorithmParams")))}return Object(r.a)(e,[{key:"fromSchema",value:function(t){Object(c.clearProps)(t,["algorithm","params"]);var n=Object(i.compareSchema)(t,t,e.schema({names:{algorithmIdentifier:"algorithm",algorithmParams:"params"}}));if(!1===n.verified)throw new Error("Object's schema was not verified against input data for AlgorithmIdentifier");this.algorithmId=n.result.algorithm.valueBlock.toString(),"params"in n.result&&(this.algorithmParams=n.result.params)}},{key:"toSchema",value:function(){var e=[];return e.push(new i.ObjectIdentifier({value:this.algorithmId})),"algorithmParams"in this&&this.algorithmParams instanceof asn1js.Any===!1&&e.push(this.algorithmParams),new i.Sequence({value:e})}},{key:"toJSON",value:function(){var e={algorithmId:this.algorithmId};return"algorithmParams"in this&&this.algorithmParams instanceof asn1js.Any===!1&&(e.algorithmParams=this.algorithmParams.toJSON()),e}},{key:"isEqual",value:function(t){return t instanceof e!==!1&&(this.algorithmId===t.algorithmId&&("algorithmParams"in this?"algorithmParams"in t&&JSON.stringify(this.algorithmParams)===JSON.stringify(t.algorithmParams):!("algorithmParams"in t)))}}],[{key:"defaultValues",value:function(e){switch(e){case"algorithmParams":return new i.Any;default:throw new Error("Invalid member name for AlgorithmIdentifier class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"algorithmId":return""===t;case"algorithmParams":return t instanceof asn1js.Any;default:throw new Error("Invalid member name for AlgorithmIdentifier class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.getParametersValue)(e,"names",{});return new i.Sequence({name:t.blockName||"",optional:t.optional||!1,value:[new i.ObjectIdentifier({name:t.algorithmIdentifier||"algorithm"}),new i.Any({name:t.algorithmParams||"parameters",optional:!0})]})}}]),e}()},74:function(e){e.exports=JSON.parse('[{"type":"Deluxe Room","price":"1.5","frequency":"per night","discountPrice":"1","image":"./hotel_3.jpg"},{"type":"King Suite","price":"2","frequency":"per night","discountPrice":"1.5","image":"./hotel_2.png"},{"type":"Superior Deluxe Suite","price":"5.5","frequency":"per night","discountPrice":"4","image":"./hotel_1.jpg"}]')},95:function(e,t,n){}},[[123,1,2]]]);
//# sourceMappingURL=main.a6fb7aeb.chunk.js.map